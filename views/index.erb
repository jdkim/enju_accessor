<h1>EnjuAccessor</h1>
<ul>
<li>A REST service to produce annotation of syntactic parsing.</li>
<li>It accesses an Enju CGI server to receive parsing results.</li>
<li>It produces annotation in PubAnnotation JSON format.</li>
</ul>

<h2>Usage</h2>
<h3>Input</h3>
<p>Post a block of text as a value of the parameter <i>text</i>, as follows:

<div style="">
<pre style="display:inline-block; background-color:#ddd; padding:5px">
curl -d text="..." http://bionlp.dbcls.jp/enju_rest/
</pre>
</div>

or

<div style="">
<pre style="display:inline-block; background-color:#ddd; padding:5px">
curl -H "content-type:application/json" -d '{"text":"..."}' http://bionlp.dbcls.jp/enju_rest/
</pre>
</div>

<h3>Output</h3>
</ul>
<li>you will get the parsing results in the <a href="http://www.pubannotation.org/docs/format/">PubAnnotation JSON format</a>.</li>
</ol>

<h2>I/F Synopsis (Ruby on Sinatra)</h2>
<pre style="width:710px;background-color:#EEEEFF">
require 'sinatra'
require 'json'

before do
	if request.content_type &amp;&amp; request.content_type.downcase == 'application/json'
		body = request.body.read
		json_params = JSON.parse body, :symbolize_names => true unless body.empty?
		params.merge!(json_params) unless json_params.nil?
	end
end

post '/' do
	begin
		text = params[:text]
		raise ArgumentError, "'text' value needs to be supplied." if text.nil?

		...

		headers \
			'Content-Type' => 'application/json'
		body annotations.to_json

	rescue ArgumentError => e
		headers \
			'Content-Type' => 'application/json'
		status 400
		{message:e.message}.to_json

	rescue IOError => e
		headers \
			'Content-Type' => 'application/json'
		status 502
		{message:e.message}.to_json
	end
end

</pre>